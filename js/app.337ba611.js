(function(){"use strict";var t={8831:function(t,e,n){var o=n(9242),i=n(3396);function s(t,e){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}var a=n(89);const r={},u=(0,a.Z)(r,[["render",s]]);var d=u,c=n(2483),l=n(7139);const h={class:"main-wrapper"},T={class:"question-page"},I={class:"text-question-wrapper"},p={class:"text-question-wrapper"},f=(0,i._)("hr",{style:{width:"700px"}},null,-1),v={class:"branch-list"},_={class:"column-id"},m=(0,i._)("div",null,"Текст ответа",-1),x=["onUpdate:modelValue"],E=["onClick"],w=["onClick"],g=(0,i._)("hr",{style:{width:"700px"}},null,-1);function y(t,e,n,s,a,r){return(0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",T,[(0,i._)("h2",null,"Вопрос id: "+(0,l.zw)(a.questionId),1),(0,i._)("div",null,[a.parentId?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>r.moveToParentId&&r.moveToParentId(...t))}," Перейти к родителю "+(0,l.zw)(a.parentId),1)):(0,i.kq)("",!0)]),(0,i._)("div",I,[(0,i.Uk)(" Текст: "),(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.infoText=t),class:"text-info-question"},"\r\n        ",512),[[o.nr,a.infoText,void 0,{lazy:!0}]])]),(0,i._)("div",p,[(0,i.Uk)(" Вопрос: "),(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.questionText=t),class:"text-info-question"},"          \r\n        ",512),[[o.nr,a.questionText,void 0,{lazy:!0}]])]),f,(0,i._)("div",null,[(0,i._)("button",{onClick:e[3]||(e[3]=(...t)=>r.ADD_QUESTION&&r.ADD_QUESTION(...t))},"Добавить новый узел")]),(0,i._)("div",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.answerTransitions,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"branch-item"},[(0,i._)("div",_," id: "+(0,l.zw)(t.transitionId),1),(0,i._)("div",null,[m,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e=>t.answerText=e,class:"answer-text"},null,8,x),[[o.nr,t.answerText]])]),(0,i._)("button",{onClick:e=>r.moveToId(t.transitionId)},"Перейти",8,E),(0,i._)("button",{onClick:e=>r.CHECK_AND_DELETE(t.transitionId)},"Удалить",8,w)])))),128))]),g,(0,i._)("button",{onClick:e[4]||(e[4]=(...t)=>r.saveData&&r.saveData(...t)),class:"button-save"},"Сохранить")])])}n(7658);var q=n(4161),D={data(){return{serverURL:"https://dev1.med-game.ru/api/v1",testId:11,questionId:563,parentId:0,parentInfoText:"",parentQuestionText:"",infoText:"",questionText:"",answerTransitions:[],token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2ODExMDY1NDEuNDcwNzgzLCJpYXQiOjE2ODAwMjY1NDEuNDcwNzg3LCJ1c2VybmFtZSI6ImFkbWluIiwicm9sZXMiOlsiYWRtaW4tcGFydCIsIm1hbmFnZS11c2VycyIsIm1hbmFnZS1yb2xlcyJdfQ.qngZS7Xu8nEkB1gZCa_UZIbqyONUCFF09S6IF3wzxlo"}},computed:{},methods:{GET_QUESTION_DATA(){(0,q.Z)({method:"get",url:`${this.serverURL}/admin/question/${this.questionId}`,headers:{Authorization:`Bearer ${this.token}`}}).then((t=>{this.setData(t.data.data),console.log(t)})).catch((t=>(console.log("Ошибка:"),console.log(t),t)))},UPDATE_QUESTION_DATA(){(0,q.Z)({url:`${this.serverURL}/admin/question/${this.questionId}`,method:"put",headers:{Authorization:`Bearer ${this.token}`},data:{id:this.questionId,question_type_id:2,is_active:!0,test_id:this.testId,seq_no:1,body:{parentId:this.parentId,infoText:this.infoText,questionText:this.questionText,answerTransitions:this.answerTransitions}}}).catch((function(t){console.log(t)}))},DELETE_QUESTION(t){(0,q.Z)({url:`${this.serverURL}/admin/question/${t}`,method:"delete",headers:{Authorization:`Bearer ${this.token}`}}).then((()=>{const e=this.answerTransitions.findIndex((e=>e.transitionId===t));e>=0&&this.answerTransitions.splice(e,1),this.UPDATE_QUESTION_DATA()})).catch((function(t){console.log(t)}))},CHECK_AND_DELETE(t){(0,q.Z)({method:"get",url:`${this.serverURL}/admin/question/${t}`,headers:{Authorization:`Bearer ${this.token}`}}).then((e=>{console.log(e.data.data.body.answerTransitions.length),e.data.data.body.answerTransitions.length?(console.log("У удаляемого объекта есть зависимые узлы: ",e.data.data.body.answerTransitions.length),console.log("Нельзя удалять объект")):(console.log("Удаляем объект"),this.DELETE_QUESTION(t))})).catch((t=>(console.log("Ошибка:"),console.log(t),t)))},ADD_QUESTION(){(0,q.Z)({url:`${this.serverURL}/admin/questions`,method:"post",headers:{Authorization:`Bearer ${this.token}`},data:{question_type_id:2,is_active:!0,test_id:this.testId,seq_no:1,body:{parentId:this.questionId,infoText:"",questionText:"",answerTransitions:[]}}}).then((t=>{this.answerTransitions.push({transitionId:t.data.data.id,answerText:""}),this.UPDATE_QUESTION_DATA()})).catch((function(t){console.log(t)}))},setData(t){this.parentId=t.body.parentId,this.infoText=t.body.infoText,this.questionText=t.body.questionText,this.answerTransitions=t.body.answerTransitions},saveData(){this.UPDATE_QUESTION_DATA()},moveToId(t){this.questionId=t,this.GET_QUESTION_DATA()},moveToParentId(){this.parentId?(this.questionId=this.parentId,this.GET_QUESTION_DATA()):console.log("Не задан parentId")}},mounted(){this.GET_QUESTION_DATA()}};const b=(0,a.Z)(D,[["render",y]]);var A=b;const O=[{path:"/",name:"QuestionPage2",component:A},{path:"/test:testId/question:questionId",name:"question",component:A}],U=(0,c.p7)({history:(0,c.r5)(),routes:O});var N=U,k=n(65),C=(0,k.MT)({state:{serverURL:"https://dev1.med-game.ru/api/v1",testId:11,questionId:563,parentId:0,parentInfoText:"",parentQuestionText:"",infoText:"",questionText:"",answerTransitions:[],currentMoveId:0,isActiveQuestion:!0,token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2ODExMDY1NDEuNDcwNzgzLCJpYXQiOjE2ODAwMjY1NDEuNDcwNzg3LCJ1c2VybmFtZSI6ImFkbWluIiwicm9sZXMiOlsiYWRtaW4tcGFydCIsIm1hbmFnZS11c2VycyIsIm1hbmFnZS1yb2xlcyJdfQ.qngZS7Xu8nEkB1gZCa_UZIbqyONUCFF09S6IF3wzxlo"},getters:{questionId(t){return t.questionId},parentId(t){return t.parentId},infoText(t){return t.infoText},questionText(t){return t.questionText},answerTransitions(t){return t.answerTransitions}},mutations:{setDataQuestion(t,e){t.parentId=e.body.parentId,t.infoText=e.body.infoText,t.questionText=e.body.questionText,t.answerTransitions=e.body.answerTransitions},setParentTexts(t,e){t.parentInfoText=e.body.infoText,t.parentQuestionText=e.body.questionText}},actions:{GET_QUESTION_DATA({state:t,commit:e,dispatch:n}){(0,q.Z)({method:"get",url:`${t.serverURL}/admin/question/${t.questionId}`,headers:{Authorization:`Bearer ${t.token}`}}).then((t=>{e("setDataQuestion",t.data.data),console.log(t)})).then((()=>!t.parentId||n("GET_PARENT_TEXTS"))).catch((t=>(console.log("Ошибка:"),console.log(t),t)))},GET_PARENT_TEXTS({state:t,commit:e}){(0,q.Z)({method:"get",url:`${t.serverURL}/admin/question/${t.parentId}`,headers:{Authorization:`Bearer ${t.token}`}}).then((t=>{e("setParentTexts",t.data.data),console.log("33333333333"),console.log(t)})).catch((t=>(console.log("Ошибка:"),console.log(t),t)))},moveToId({state:t,dispatch:e},n){return t.questionId=n,e("GET_QUESTION_DATA")}},modules:{}}),S=n(9529);n(4415);(0,o.ri)(d).use(C).use(N).use(S.Z).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o].call(s.exports,s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,s){if(!o){var a=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],s=t[c][2];for(var r=!0,u=0;u<o.length;u++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](o[u])}))?o.splice(u--,1):(r=!1,s<a&&(a=s));if(r){t.splice(c--,1);var d=i();void 0!==d&&(e=d)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[o,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,s,a=o[0],r=o[1],u=o[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(u)var c=u(n)}for(e&&e(o);d<a.length;d++)s=a[d],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},o=self["webpackChunkmedtest12"]=self["webpackChunkmedtest12"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(8831)}));o=n.O(o)})();
//# sourceMappingURL=app.337ba611.js.map